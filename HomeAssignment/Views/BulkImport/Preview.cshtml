@model IEnumerable<HomeAssignment.Models.IItemValidating>

@{
    ViewData["Title"] = "Preview Imported Items";
}

<h1 class="mb-4">Preview Imported Items</h1>

<table class="table table-bordered table-striped table-hover shadow-sm">
    <thead class="table-dark">
        <tr>
            <th>Type</th>
            <th>Name / Title</th>
            <th>Owner Email / Restaurant Id</th>
            <th>Price</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            @if (item is HomeAssignment.Models.Restaurant r)
            {
                <tr>
                    <td>Restaurant</td>
                    <td>
                        <div class="fw-semibold">@r.Name</div>
                        <div class="text-muted small">@r.Description</div>
                    </td>
                    <td>
                        <div class="small"><span class="text-muted">Owner:</span> @r.OwnerEmailAddress</div>
                        <div class="small"><span class="text-muted">ExternalId:</span> @r.ExternalId</div>
                    </td>
                    <td>-</td>
                    <td>@r.Status</td>
                </tr>
            }
            else if (item is HomeAssignment.Models.MenuItem m)
            {
                <tr>
                    <td>MenuItem</td>
                    <td>
                        <div class="fw-semibold">@m.Title</div>
                        <div class="text-muted small">ExternalId: @m.ExternalId</div>
                    </td>
                    <td>
                        <div class="small"><span class="text-muted">Restaurant:</span> @m.RestaurantExternalId</div>
                    </td>
                    <td>@m.Price.ToString("0.00") @(string.IsNullOrWhiteSpace(m.Currency) ? "" : m.Currency)</td>

                    <td>@m.Status</td>
                </tr>
            }
        }
    </tbody>
  </table>
<hr />

<form asp-controller="BulkImport"
      asp-action="DownloadImagesZip"
      method="post"
      class="mb-3">
    <button type="submit" class="btn btn-secondary">
        Download Images ZIP Template
    </button>
</form>

<form asp-controller="BulkImport"
      asp-action="CommitToDatabase"
      method="post"
      enctype="multipart/form-data">
    <div class="mb-3">
        <label for="imagesZip" class="form-label">Upload Images ZIP (optional)</label>
        <input type="file" name="imagesZip" id="imagesZip" class="form-control" />
    </div>
    <button type="submit" class="btn btn-success">Commit to Database</button>
</form>

<p class="fw-bold mt-3">Data stored temporarily. Nothing saved to DB yet.</p>

<a class="btn btn-secondary mt-2" asp-controller="BulkImport" asp-action="Index">Back to Upload</a>
